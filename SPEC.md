# 匿名聊天網站規格文件

## 專案目標與範圍
建立一個純前端的匿名聊天網站，讓使用者可以：
1. 無需註冊即可參與聊天
2. 自由選擇或建立聊天室
3. 使用表情符號增加互動樂趣
4. 在不同裝置上都能順暢使用

## 技術規格
### 前端技術
- HTML5：網站結構
- CSS3：使用 Bootstrap 5 作為基礎框架
- JavaScript：原生 JS，無需編譯
- 所有套件使用 CDN 版本以支援 GitHub Pages 部署

### 使用的外部服務
- Firebase Realtime Database
  - 用於儲存聊天訊息
  - 處理即時數據同步
  - 記錄在線使用者狀態

### 外部套件（CDN）
- Bootstrap 5.3.0：UI 框架
- Font Awesome 6.4.0：圖示
- Emoji-Picker-Element 1.18.3：表情符號選擇器
- Firebase 9.22.1：資料庫服務

## 功能需求
### 1. 用戶功能
- [ ] 自動產生臨時暱稱
- [ ] 允許修改暱稱
- [ ] 暱稱本地儲存（localStorage）
- [ ] 發送文字訊息
- [ ] 插入表情符號
- [ ] 切換深色/淺色主題

### 2. 聊天室功能
- [ ] 預設公共聊天室
- [ ] 建立新聊天室
- [ ] 在聊天室之間切換
- [ ] 顯示目前在線人數
- [ ] 顯示使用者加入/離開通知
- [ ] 訊息時間戳記

### 3. UI/UX 要求
- [ ] 響應式設計（手機/平板/電腦）
- [ ] 深色/淺色主題支援
- [ ] 訊息動態載入動畫
- [ ] 新訊息提示
- [ ] 輸入狀態提示

## 專案結構
```
/
├── index.html      # 主要 HTML 檔案
├── css/
│   └── style.css   # 自定義樣式
├── js/
│   └── app.js      # 主要邏輯
└── SPEC.md         # 專案規格文件
```

## 資料結構（Firebase）
```javascript
{
  "rooms": {
    "public": {
      "name": "公共聊天室",
      "createdAt": timestamp
    }
  },
  "messages": {
    "roomId": {
      "messageId": {
        "text": "訊息內容",
        "nickname": "發送者暱稱",
        "timestamp": timestamp,
        "type": "text/system"
      }
    }
  },
  "online": {
    "roomId": {
      "userId": {
        "nickname": "使用者暱稱",
        "lastActive": timestamp
      }
    }
  }
}
```

## 開發進度
### 已完成
- [x] 建立專案結構
- [x] 設計基本 UI 介面（HTML/CSS）
- [x] 建立專案文件

### 進行中
- [ ] 整合 Firebase（待配置）
- [ ] 實作聊天基本功能
- [ ] 實作聊天室管理功能

### 待完成
- [ ] 實作在線人數統計
- [ ] 實作表情符號選擇器
- [ ] 優化使用者體驗
- [ ] 測試跨裝置相容性
- [ ] 部署至 GitHub Pages

## 注意事項
1. Firebase 規則設定
   - 需設定適當的讀寫權限
   - 限制訊息長度
   - 設定資料保留期限

2. 效能考量
   - 限制載入訊息數量
   - 定期清理過期資料
   - 壓縮及優化資源

3. 安全性考量
   - 防止 XSS 攻擊
   - 訊息內容過濾
   - 限制發送頻率

## 待解決問題
1. Firebase 連線中斷的重連機制
2. 訊息發送失敗的重試機制
3. 離線時的資料處理策略

## 後續優化方向
1. 加入訊息編輯功能
2. 支援圖片分享
3. 加入簡單的管理功能
4. 實作訊息搜尋功能
5. 增加更多表情符號支援