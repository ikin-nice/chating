<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>匿名聊天室</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">
</head>
<body data-bs-theme="light">
    <div class="container-fluid vh-100 d-flex flex-column">
        <!-- 頂部導航 -->
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">匿名聊天室</a>
                <div class="d-flex align-items-center">
                    <span class="me-3" id="onlineCount">在線人數：0</span>
                    <button class="btn btn-outline-secondary me-2" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#nicknameModal">
                        設定暱稱
                    </button>
                </div>
            </div>
        </nav>

        <!-- 主要聊天區域 -->
        <div class="flex-grow-1 d-flex">
            <!-- 聊天室選擇 -->
            <div class="chat-rooms bg-body-tertiary p-3" style="width: 250px;">
                <h5>聊天室</h5>
                <div class="list-group" id="roomList">
                    <button class="list-group-item list-group-item-action active" data-room="public">
                        公共聊天室
                    </button>
                </div>
                <button class="btn btn-success w-100 mt-3" data-bs-toggle="modal" data-bs-target="#newRoomModal">
                    建立新聊天室
                </button>
            </div>

            <!-- 訊息區域 -->
            <div class="flex-grow-1 d-flex flex-column">
                <div class="messages flex-grow-1 p-3" id="messageArea">
                    <!-- 訊息將在這裡動態添加 -->
                </div>
                
                <!-- 輸入區域 -->
                <div class="input-area p-3 bg-body-tertiary">
                    <div class="input-group">
                        <button class="btn btn-outline-secondary" type="button" id="emojiButton">
                            <i class="far fa-smile"></i>
                        </button>
                        <input type="text" class="form-control" placeholder="輸入訊息..." id="messageInput">
                        <button class="btn btn-primary" type="button" id="sendButton">
                            發送
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 暱稱設定 Modal -->
    <div class="modal fade" id="nicknameModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">設定暱稱</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" class="form-control" id="nicknameInput" placeholder="請輸入暱稱">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="saveNickname">儲存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 新聊天室 Modal -->
    <div class="modal fade" id="newRoomModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">建立新聊天室</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" class="form-control" id="roomNameInput" placeholder="請輸入聊天室名稱">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="createRoom">建立</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Emoji Picker -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-picker-element@1.18.3/index.js" type="module"></script>
    <!-- Custom JS -->
    <script src="js/app.js"></script>
</body>
</html>